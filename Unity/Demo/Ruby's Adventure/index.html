<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Ruby&#39;s Adventure | Vzer&#39;s Blog</title>
  <meta name="keywords" content=" 2D ">
  <meta name="description" content="Ruby&#39;s Adventure | Vzer&#39;s Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="这里什么都没有…">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://example.com/about/index.html">
<meta property="og:site_name" content="Vzer&#39;s Blog">
<meta property="og:description" content="这里什么都没有…">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-05-24T10:38:54.000Z">
<meta property="article:modified_time" content="2022-05-24T11:10:58.509Z">
<meta property="article:author" content="Vzer">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.4.1"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>Vzer</span>
</div>

<div class="icon">
    
        
            <a title="github"
               href="https://github.com/vzerzz"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/mo-sa-ran-yun-yu"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="csdn"
               href="https://blog.csdn.net/gentleclown"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="全部文章">全部文章
            
                <small>(47)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="C++">
                        
                        C++
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Graphics">
                        <i class="fold iconfont icon-right"></i>
                        
                        Graphics
                        <small>(17)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Graphics<--->Fundamental">
                                        
                                        Fundamental
                                        
                                            <small>(11
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Graphics<--->RTR">
                                        
                                        RTR
                                        
                                            <small>(6
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Unity">
                        <i class="fold iconfont icon-right"></i>
                        
                        Unity
                        <small>(26)</small>
                        
                    </div>
                    
                        <ul class="sub hide">
                            
                                <li>
                                    <div data-rel="Unity<--->C#">
                                        
                                        C#
                                        
                                            <small>(4
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Unity<--->DataPersistence">
                                        
                                        DataPersistence
                                        
                                            <small>(2
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Unity<--->Demo">
                                        
                                        Demo
                                        
                                            <small>(6
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Unity<--->Frame">
                                        
                                        Frame
                                        
                                            <small>(6
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                                <li>
                                    <div data-rel="Unity<--->Fundamental">
                                        
                                        Fundamental
                                        
                                            <small>(8
                                                )</small>
                                        
                                    </div>
                                    
                                </li>
                            
                        </ul>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Others">
                        
                        Others
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  site_url"
               
               href="/about">关于</a>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="47">
<input type="hidden" id="yelog_site_word_count" value="80k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>2D</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>3D</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>FPS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sneak</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Quaternion/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Quaternion">Quaternion</span>
            <span class="post-date" title="2023-01-13 00:00:00">2023/01/13</span>
        </a>
        
        
        <a  class="全部文章 Graphics RTR "
           href="/Graphics/RTR/PracticalIndustrialSolutions/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="PracticalIndustrialSolutions">PracticalIndustrialSolutions</span>
            <span class="post-date" title="2022-12-05 00:00:00">2022/12/05</span>
        </a>
        
        
        <a  class="全部文章 Graphics RTR "
           href="/Graphics/RTR/RTRT/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="RTRT">RTRT</span>
            <span class="post-date" title="2022-11-24 00:00:00">2022/11/24</span>
        </a>
        
        
        <a  class="全部文章 Graphics RTR "
           href="/Graphics/RTR/PBR/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="PBR">PBR</span>
            <span class="post-date" title="2022-11-23 00:00:00">2022/11/23</span>
        </a>
        
        
        <a  class="全部文章 Graphics RTR "
           href="/Graphics/RTR/GlobalIllumination/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Global Illumination">Global Illumination</span>
            <span class="post-date" title="2022-11-20 00:00:00">2022/11/20</span>
        </a>
        
        
        <a  class="全部文章 Graphics RTR "
           href="/Graphics/RTR/EnvironmentMapping/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Environment Mapping">Environment Mapping</span>
            <span class="post-date" title="2022-11-15 00:00:00">2022/11/15</span>
        </a>
        
        
        <a  class="全部文章 Graphics RTR "
           href="/Graphics/RTR/Shadows/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Shadows">Shadows</span>
            <span class="post-date" title="2022-11-03 00:00:00">2022/11/03</span>
        </a>
        
        
        <a  class="全部文章 Others "
           href="/Others/env/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="env">env</span>
            <span class="post-date" title="2022-10-30 00:00:00">2022/10/30</span>
        </a>
        
        
        <a  class="全部文章 Others "
           href="/Others/vscodevim/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="vscodevim">vscodevim</span>
            <span class="post-date" title="2022-10-20 00:00:00">2022/10/20</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/GAMES101/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="GAMES101">GAMES101</span>
            <span class="post-date" title="2022-10-10 00:00:00">2022/10/10</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Animation/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Animation">Animation</span>
            <span class="post-date" title="2022-10-09 00:00:00">2022/10/09</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/AdvancedTopics/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="AdvancedTopics">AdvancedTopics</span>
            <span class="post-date" title="2022-10-08 00:00:00">2022/10/08</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Camera/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Camera">Camera</span>
            <span class="post-date" title="2022-10-07 00:00:00">2022/10/07</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Materials/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Materials">Materials</span>
            <span class="post-date" title="2022-10-07 00:00:00">2022/10/07</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/RayTracing/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="RayTracing">RayTracing</span>
            <span class="post-date" title="2022-09-29 00:00:00">2022/09/29</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Geometry/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Geometry">Geometry</span>
            <span class="post-date" title="2022-09-28 00:00:00">2022/09/28</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Shading/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Shading">Shading</span>
            <span class="post-date" title="2022-09-25 00:00:00">2022/09/25</span>
        </a>
        
        
        <a  class="全部文章 Others "
           href="/Others/Git/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Git">Git</span>
            <span class="post-date" title="2022-08-19 00:00:00">2022/08/19</span>
        </a>
        
        
        <a  class="全部文章 C++ "
           href="/C++/Cherno/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Cherno">Cherno</span>
            <span class="post-date" title="2022-08-18 00:00:00">2022/08/18</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Rasterization/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Rasterization">Rasterization</span>
            <span class="post-date" title="2022-07-14 00:00:00">2022/07/14</span>
        </a>
        
        
        <a  class="全部文章 Graphics Fundamental "
           href="/Graphics/Fundamental/Transformation/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Transformation">Transformation</span>
            <span class="post-date" title="2022-07-14 00:00:00">2022/07/14</span>
        </a>
        
        
        <a  class="全部文章 Unity Frame "
           href="/Unity/Frame/UIFrame/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="UIFrame">UIFrame</span>
            <span class="post-date" title="2022-06-17 00:00:00">2022/06/17</span>
        </a>
        
        
        <a  class="全部文章 Unity C# "
           href="/Unity/Csharp/CsharpFUNDAMENTAL/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="C# 语言基础">C# 语言基础</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity C# "
           href="/Unity/Csharp/CsharpDesignPattern/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="C# 设计模式">C# 设计模式</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity C# "
           href="/Unity/Csharp/CsharpHL/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="C# 高级">C# 高级</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity C# "
           href="/Unity/Csharp/CsharpOOP/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="C#面向对象">C#面向对象</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity DataPersistence "
           href="/Unity/DataPersistence/SQLite/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="SQLite">SQLite</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity DataPersistence "
           href="/Unity/DataPersistence/Storage/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="数据存储">数据存储</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Demo "
           href="/Unity/Demo/MultiplayerFPS/"
           data-tag="FPS"
           data-author="" >
            <span class="post-title" title="MultiplayerFPS">MultiplayerFPS</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Demo "
           href="/Unity/Demo/RobbiePlatform/"
           data-tag="2D"
           data-author="" >
            <span class="post-title" title="RobbiePlatform">RobbiePlatform</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Demo "
           href="/Unity/Demo/Stealth/"
           data-tag="3D,sneak"
           data-author="" >
            <span class="post-title" title="Stealth">Stealth</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Demo "
           href="/Unity/Demo/Ruby's%20Adventure/"
           data-tag="2D"
           data-author="" >
            <span class="post-title" title="Ruby&#39;s Adventure">Ruby&#39;s Adventure</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Demo "
           href="/Unity/Demo/SunnyLand/"
           data-tag="2D"
           data-author="" >
            <span class="post-title" title="SunnyLand">SunnyLand</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Demo "
           href="/Unity/Demo/Up/"
           data-tag="2D"
           data-author="" >
            <span class="post-title" title="Up">Up</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Frame "
           href="/Unity/Frame/AStarPathFinding/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="AStarPathFinding">AStarPathFinding</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Frame "
           href="/Unity/Frame/FSM/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="FSM">FSM</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Frame "
           href="/Unity/Frame/Photon/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Photon">Photon</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Frame "
           href="/Unity/Frame/AssetBundle/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="AssetBundle">AssetBundle</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Frame "
           href="/Unity/Frame/xLua/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="xLua">xLua</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/Animation/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="动画系统">动画系统</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/Base/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="初识">初识</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/Coroutine/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="协程">协程</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/Effects/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="特效系统">特效系统</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/Navigation/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="导航系统">导航系统</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/Physics/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="物理系统">物理系统</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/UGUI/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="UGUI">UGUI</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="全部文章 Unity Fundamental "
           href="/Unity/UnityFundamental/WWW/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="WWW">WWW</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-Unity/Demo/Ruby&#39;s Adventure" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Ruby&#39;s Adventure</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Unity">Unity</a> > 
            
            <a  data-rel="Unity&lt;---&gt;Demo">Demo</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color3">2D</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2022-06-29 20:25:27'>2022-01-01 00:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:4.6k</span>
        
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Ruby%E2%80%99s-Adventure"><span class="toc-text">Ruby’s Adventure</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Unity"><span class="toc-text">Unity</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scripts"><span class="toc-text">Scripts</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Ruby’s-Adventure"><a href="#Ruby’s-Adventure" class="headerlink" title="Ruby’s Adventure"></a>Ruby’s Adventure</h1><h2 id="Unity"><a href="#Unity" class="headerlink" title="Unity"></a>Unity</h2><ul>
<li><p>“Pixels per Unit”通过定义 1 个单位内应该设置的像素数量来告知 Unity 如何设置精灵的大小。</p>
</li>
<li><p>游戏对象的排序问题</p>
<blockquote>
<p>调整瓦片的 Order in Layer 属性</p>
<span id="more"></span>
</blockquote>
<ul>
<li><p>“伪造”透视图</p>
<blockquote>
<p>根据直觉，玩家希望角色在立方体前面时首先绘制角色，而角色在立方体后面时最后绘制角色</p>
</blockquote>
<ol>
<li>选择 Edit &gt; Project Settings&gt;Graphics。</li>
<li>在 Camera Settings 中，找到 Transparency Sort Mode 字段。此字段决定了精灵的绘制顺序。使用下拉菜单将此设置从 Default 更改为 Custom Axis。</li>
<li>在 Transparency Sort Axis 中添加以下坐标：x = 0 y = 1 z = 0此设置告诉 Unity 在 y 轴上基于精灵的位置来绘制精灵。</li>
<li>游戏对象Sprite Sort Point 中选择pivot,再于Sprite Editor中更改pivot的位置</li>
</ol>
</li>
</ul>
</li>
<li><p>物体碰撞时的抖动问题</p>
<blockquote>
<p>在帧更新过程中移动角色,物理系统将自己的游戏对象副本移到相应的新位置,物理系统发现角色碰撞体现在位于另一个碰撞体内，然后将角色碰撞体移回,物理系统将 游戏对象与该新位置同步.不断在箱子内移动角色，而物理系统则将她移回。这种冲突就会导致发生抖动</p>
</blockquote>
<ul>
<li><p>对于不加rigidbody 2d的对象可以用transform.position进行移动</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vector2 position = transform.position;</span><br><span class="line">position.x = position.x + <span class="number">3.0f</span>* horizontal * Time.deltaTime;</span><br><span class="line">position.y = position.y + <span class="number">3.0f</span> * vertical * Time.deltaTime;</span><br><span class="line">transform.position = position;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于加上rigidbody 2d的对象则不行</p>
<blockquote>
<p>When a Collider 2D is attached to the Rigidbody 2D, it moves with it. A Collider 2D should never be moved directly using the Transform or any collider offset; the Rigidbody 2D should be moved instead. This offers the best performance and ensures correct collision detection.</p>
</blockquote>
<ul>
<li>调用rigidbody相关函数以及FixedUpdate</li>
</ul>
<blockquote>
<p>需要定期进行更新,想直接影响物理组件或对象（例如刚体），就需要使用FixedUpdate,不应该读取 Fixedupdate 函数中的输入。FixedUpdate 不会持续运行，因此有可能会错过用户输入。</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    horizontal = Input.GetAxis(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line">    vertical = Input.GetAxis(<span class="string">&quot;Vertical&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Vector2 position = rigidbody2d.position;</span><br><span class="line">    position.x = position.x + <span class="number">3.0f</span> * horizontal * Time.deltaTime;</span><br><span class="line">    position.y = position.y + <span class="number">3.0f</span> * vertical * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">    rigidbody2d.MovePosition(position);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>瓦片地图碰撞</p>
<ul>
<li><p>选择性碰撞</p>
<blockquote>
<p>在 Project 窗口中，找到存放tile的文件夹，选择所有不是水的瓦片,在 Inspector 中，找到 Collider Type 属性，然后将该属性从 Sprite（目前值）更改为 None。你选择的瓦片不再被视为碰撞体</p>
</blockquote>
</li>
<li><p>复合碰撞体</p>
<blockquote>
<p>在tilemap对象中添加Composite Collider 2D组件,启用 Used By Composite 复选框, 将 Rigidbody Body Type 属性设置为 Static </p>
</blockquote>
</li>
</ul>
</li>
<li><p>伤害区域</p>
<ul>
<li><p>只有在角色进入区域时才会伤害角色。如果角色停留在区域内，则不会再伤害角色。</p>
<blockquote>
<p>OnTriggerEnter2D 更改为 OnTriggerStay2D,刚体在触发器内的每一帧都会调用此函数，而不是在刚体刚进入时仅调用一次。</p>
</blockquote>
</li>
<li><p>站着不动时不会受到伤害</p>
<blockquote>
<p>在 Rigidbody 组件中将 Sleeping Mode 设置为 Never Sleep</p>
</blockquote>
</li>
<li><p>在五帧内便失去所有生命值</p>
<blockquote>
<p>添加无敌状态</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> timeInvincible = <span class="number">2.0f</span>;<span class="comment">//无敌状态时间</span></span><br><span class="line"><span class="built_in">bool</span> isInvincible;<span class="comment">//存储当前是否处于无敌状态</span></span><br><span class="line"><span class="built_in">float</span> invincibleTimer;<span class="comment">//剩下的无敌状态时间</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (isInvincible)</span><br><span class="line">    &#123;</span><br><span class="line">        invincibleTimer -= Time.deltaTime;</span><br><span class="line">        <span class="keyword">if</span> (invincibleTimer &lt; <span class="number">0</span>)</span><br><span class="line">            isInvincible = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ChangeHealth</span>(<span class="params"><span class="built_in">int</span> amount</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (amount &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (isInvincible)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        </span><br><span class="line">        isInvincible = <span class="literal">true</span>;</span><br><span class="line">        invincibleTimer = timeInvincible;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建更大的伤害区域，则精灵会拉伸而显得很难看,可以让 Sprite Renderer 平铺精灵。将伤害区域的大小调整到足以将精灵容纳两次，则会多次并排绘制精灵：</p>
<blockquote>
<ol>
<li>确保游戏对象的缩放在 Transform 组件中设置为 1,1,1。在 Sprite Renderer 组件中将 Draw Mode 设置为 Tiled，并将 Tile Mode 更改为 Adaptive。</li>
<li>在 Project 窗口中选择精灵,将 Mesh Type 更改为 Full Rect。</li>
<li>选中 Box Collider 2D 组件的 Auto Tiling 属性，以便碰撞体随精灵一起平铺。</li>
</ol>
</blockquote>
</li>
</ul>
</li>
<li><p>翻转动画</p>
<blockquote>
<p>Flip X,在帧 0 和帧 4 上的时候，选中属性名称旁的切换开关，即可将属性设置为 true，这样 Flip 在整个动画中将保持选中状态：</p>
</blockquote>
</li>
<li><p>混合树</p>
<blockquote>
<ul>
<li>允许你根据参数来混合多段动画</li>
<li>希望 Blend Tree 使用两个参数来控制水平和垂直方向的更改，因此请将 Blend Type 设置为 2D Simple Directional。</li>
<li>添加参数与motion</li>
</ul>
</blockquote>
</li>
<li><p>Instantiate</p>
<blockquote>
<ul>
<li>Instantiate 的第一个参数是一个对象，在第二个参数的位置处创建一个副本，第三个参数是旋转(Quaternion.identity 表示“无旋转”)。</li>
<li>作用是复制一个预制件放在需要的位置,使其实例化,可用于游戏过程中产生游戏对象，如子弹,对于仅发生一次的效果（例如被击中或拾取生命值可收集对象），你可以将对预制件的引用存储在公共变量中，并在应该产生效果时调用 Instantiate。</li>
<li>使用实例化创建对象时用Awake不用Start，创建对象时 Unity 不会运行 Start，而是在下一帧才开始运行。在创建对象时（调用 Instantiate 时）就会立即调用 Awake，</li>
</ul>
</blockquote>
</li>
<li><p>输入</p>
<ul>
<li><p>Input.GetKeyDown</p>
<blockquote>
<p>测试特定的键盘按键,只有用键盘时才有效果。</p>
</blockquote>
</li>
<li><p>Input.GetButtonDown</p>
<blockquote>
<p>与轴名称一起使用,并在输入设置 (Edit &gt; Project Settings &gt; Input) 中定义该轴对应的按钮,确保在不同设备上有效</p>
</blockquote>
</li>
</ul>
</li>
<li><p>图层与碰撞</p>
<blockquote>
<p>用不同的图层来实现不同对象之间是否碰撞问题</p>
<p>打开 Edit &gt; Project Settings &gt; Physics 2D ，查看底部的 Layer Collision Matrix，便可看到与更改哪些图层彼此碰撞</p>
</blockquote>
</li>
<li><p>Cinemachine</p>
<blockquote>
<p>Cinemachine 使用虚拟摄像机，你可以在每个虚拟摄像机上选择不同的设置，然后告诉实际摄像机（Main Camera）当前哪个虚拟摄像机处于活动状态，实际摄像机就会复制这些设置。可与多个摄像机配合使用，并根据游戏的需要在多个摄像机之间进行切换.</p>
</blockquote>
<ul>
<li><p>模式:</p>
<blockquote>
<p>透视：所有远离摄像机的线都会汇聚到一个点，因此距离摄像机越远，看起来就越小。</p>
<p>正交：所有平行线将保持平行。</p>
</blockquote>
</li>
<li><p>跟随</p>
<blockquote>
<p>将你的主角从 Hierarchy 拖放到 vcam Inspector 的 Follow 属性中</p>
</blockquote>
</li>
<li><p>边界</p>
<blockquote>
<ol>
<li>Add Extension &gt; 添加 Cinemachine Confiner</li>
<li>Create Empty 来创建一个新的游戏对象CameraConfiner,添加Polygon Collider 2D 组件, Edit Collider 来规划摄像机边界(确保边框最好是直线)</li>
<li>将该游戏对象分配给 CinemachineConfiner 上的 Bounding Shape 2D</li>
<li>将该游戏对象设置为新建的图层 Confiner，在 Edit &gt; Project Settings &gt; Physics 2D中，取消勾选 Confiner 图层中的所有条目：不会与其他对象碰撞</li>
</ol>
</blockquote>
</li>
</ul>
</li>
<li><p>烟雾效果(粒子效果)</p>
<ul>
<li>Create &gt; Effects &gt; Particle System  创建一个默认的粒子系统</li>
<li><p>启用Texture Sheet Animation 部分</p>
<blockquote>
<ol>
<li>将 Mode 设置为 Sprites。</li>
<li>单击显示的精灵条目旁边的 + 按钮，这样便可以得到 2 个精灵。</li>
<li>将精灵图集效果中的烟雾精灵分配给这些属性。</li>
<li>单击 Start Frame 属性右侧的小下拉箭头，选择 Random Between Two Constants，然后输入 0 和 2。系统将选择一个介于 0 到 2（不包括 2）之间的随机数，即 0 或 1，并对粒子使用相应的精灵。</li>
<li>单击 Frame over time 旁边的黑框，这个框显示曲线帧中相应的帧随时间的变化情况（从帧 0 到 1）。你根本不想要任何动画，所以请右键单击最右边的点，然后按 Delete 键：</li>
</ol>
</blockquote>
</li>
<li><p>Shape 显示发射粒子的锥体</p>
<blockquote>
<p>Radius 设置为 0，希望所有粒子都从一个点发出</p>
<p>角度更改为大约 5 度，这样可以减少粒子的分散程度并以更加准直的线条生成</p>
</blockquote>
</li>
<li><p>随机性</p>
<blockquote>
<p>Start Lifetime 右侧的小向下箭头，然后选择 Random Between Two Constants,输入 1.5 和 3,生命周期更短且各不相同</p>
<p>Start Size 选择 Random Between Two Constants 并分别设置为 0.3 和 0.5,粒子现在变小了且大小不同</p>
<p>Start Speed 选择 Random Between Two Constants 设置为 0.5 和 1</p>
</blockquote>
</li>
<li><p>粒子消失</p>
<blockquote>
<p>变透明</p>
<blockquote>
<p>启用 Color over Lifetime 单击 Color 旁边的白色方框以打开 Gradient Editor,选择右上角的箭头，然后将 Alpha 从 255 更改为 0。</p>
</blockquote>
<p>变小</p>
<blockquote>
<p>启用Size Over Lifetime,单击 Size 框，然后查看显示在 Inspector 底部的曲线：通过将第一个点上调至 1 并将最后一个点下调至 0 来进行反转。</p>
</blockquote>
</blockquote>
</li>
<li><p>设为预制件作为对象子对象</p>
</li>
<li><p>已经产生的效果不随人物移动</p>
<blockquote>
<p>Particle System &gt;  Simulation Space 设置改为 World。</p>
</blockquote>
</li>
<li><p>脚本里用ParticleSystem创建对象 用Stop()停止，可用instantiate实例化</p>
</li>
</ul>
</li>
<li><p>UI</p>
<ul>
<li><p>Create &gt; UI &gt; Canvas</p>
</li>
<li><p>模式：</p>
<blockquote>
<p>Screen Space - Overlay：默认模式,始终在游戏的上层绘制 UI</p>
<p>Screen Space - Camera: 与摄像机对齐的平面上绘制 UI</p>
<p>World Space：任何位置</p>
</blockquote>
</li>
<li><p>Canvas Scaler</p>
<blockquote>
<p>Constant Size 无论屏幕大小或形状如何，UI 均保持大小不变。</p>
<p>Scale With Screen SizeUI 缩放取决于你设置为 Reference Resolution 的屏幕大小。</p>
</blockquote>
</li>
<li><p>添加图像 UI &gt; Image为Canvas子对象Health，双击canvas，加入图像到Source Image ， Set Native Size 按钮将 Rect Transform 值更改为图像的大小，再调整大小、</p>
</li>
<li><p>Rect Transform 中更改瞄点</p>
</li>
<li><p>添加图像到之前图像子对象，选择瞄点右下角，单击并拖动锚点，让锚点围住肖像。可使图像相对位置不变</p>
</li>
<li><p>生命值条(遮罩技术)</p>
<blockquote>
<p>Health下添加Image子对象为Mask(遮罩)，更改大小位置，同上拖动瞄点围住，同时移动轴心</p>
<p>创建遮罩的图像子对象，在瞄点菜单中按alt，选右下角，此操作将同时设置锚点和新图像的大小以填充其父级，再重新进入瞄点菜单不按alt，瞄点设为左上角</p>
<p> Mask中添加Mask组件，取消选中 Show Mask Graphic 以隐藏白色正方形。</p>
</blockquote>
</li>
<li><p>使用静态成员,生命条为单例对象，可以直接引用场景中的生命值条脚本，不必在 Inspector 中手动分配。脚本添加到生命值条游戏对象，将遮罩拖入 Mask 属性</p>
</li>
</ul>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UIHealthBar</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> UIHealthBar instance &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Image mask;</span><br><span class="line"><span class="built_in">float</span> originalSize;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    instance = <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    originalSize = mask.rectTransform.rect.width;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetValue</span>(<span class="params"><span class="built_in">float</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">&#123;          </span><br><span class="line">    mask.rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.    Horizontal, originalSize * <span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Project 文件夹中选择了三个精灵，然后将它们全部一次拖动到 Hierarchy 中，则 Unity 会自动为你创建这三个帧的动画，并将动画分配给新创建的游戏对象。该动画会自动播放，不需要你采取其他操作：</p>
</li>
<li><p>对话UI</p>
<ul>
<li><p>射线投射(触发对话)</p>
<blockquote>
<p>用触发器可能会转过脸背对青蛙，而仍能与青蛙对话。交互式中射线投射很有用</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Input.GetKeyDown(KeyCode.X))</span><br><span class="line">&#123;</span><br><span class="line">RaycastHit2D hit = Physics2D.Raycast(rigidbody2d.position + Vector2.up * <span class="number">0.2f</span>, lookDirection, <span class="number">1.5f</span>, LayerMask.GetMask(<span class="string">&quot;NPC&quot;</span>));</span><br><span class="line"><span class="keyword">if</span> (hit.collider != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    character.DisplayDialog();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>UI</p>
<blockquote>
<p>UI &gt; Canvas。此时将为发起对话的对象创建一个子级 Canvas 游戏对象。 Rect Transform 中更改大小</p>
<p>Canvas 下 UI &gt; Image,瞄点菜单里alt填充画布</p>
<p>在 Hierarchy 中选择 Canvas，然后在 Inspector 中将 Order in Layer 设置为较高的值（例如 10）：防止在游戏对象后面渲染</p>
<p> Image 下 UI &gt;  Text - TextMeshPro，按住 Alt 的同时单击扩展锚点控制柄以将文本扩展到图像的整个尺寸，白色的小控制柄移动黄色框（文本边界），给文本框留出边距，输入文字</p>
<p>禁用画布将画布隐藏起来,脚本控制</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> displayTime = <span class="number">4.0f</span>;</span><br><span class="line"><span class="keyword">public</span> GameObject dialogBox;</span><br><span class="line"><span class="built_in">float</span> timerDisplay;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">dialogBox.SetActive(<span class="literal">false</span>);</span><br><span class="line">timerDisplay = <span class="number">-1.0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (timerDisplay &gt;= <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    timerDisplay -= Time.deltaTime;</span><br><span class="line">    <span class="keyword">if</span> (timerDisplay &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        dialogBox.SetActive(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayDialog</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">timerDisplay = displayTime;</span><br><span class="line">dialogBox.SetActive(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>音频</p>
<blockquote>
<p>AudioClip 音频剪辑也是资源。可以从音频文件导入音频剪辑<br>Audio Listener 音频监听器 默认情况下，监听器位于摄像机<br>Audio Source 音频源 在该组件所在的游戏对象的位置播放音频剪辑</p>
</blockquote>
<ul>
<li><p>BGM</p>
<blockquote>
<p>创建空的游戏对象，命名为 BackgroundMusic，添加 Audio Source 组件,放入clip，选择loop， Spatial Blend 滑动条可以从 2D滑动到 3D</p>
</blockquote>
</li>
<li><p>一次性声音</p>
<blockquote>
<ol>
<li>创建一个新的音频源，分配一个音频剪辑，取消选中 Play On Awake，通过脚本设置当事件发生时播放音频剪辑。但这种做法需要为游戏中每个细小的声音都创建一个游戏对象和音频源。</li>
<li>将音频源添加到 Ruby 游戏对象，并使用该音频源播放与 Ruby 所做的游戏操作,用PlayOneShot函数 将音频剪辑作为第一个参数，并在音频源的位置使用音频源的所有设置播放一次该音频剪辑。</li>
</ol>
</blockquote>
<ul>
<li><p>PlayOneShot方法</p>
<blockquote>
<p>在Ruby下添加一个名为 audioSource 的私有 AudioSource 变量来存储音频源，用 GetComponent 在 Start 函数中获取该变量。</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ruby脚本中</span></span><br><span class="line">AudioSource audioSource;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">  rigidbody2d = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">  animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">  currentHealth = maxHealth;</span><br><span class="line"></span><br><span class="line">  audioSource= GetComponent&lt;AudioSource&gt;();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PlaySound</span>(<span class="params">AudioClip clip</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      audioSource.PlayOneShot(clip);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在需要播放音乐的地方</p>
</blockquote>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> AudioClip collectedClip;<span class="comment">//Clip记得拖入</span></span><br><span class="line"></span><br><span class="line">controller.PlaySound(collectedClip);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>空间化</p>
<blockquote>
<p>AudioSource中Spatial Blend 滑动条一直向右移动到 3D</p>
<p>3D Sound Settings 部分找到 Min Distance 和 Max Distance ：Max Distance 改为 10 个单位.因为声音系统是为 3D 设计的。所以该圆圈实际上是一个球体。由于摄像机在z轴远处，衰减不起作用，并且听不到声音</p>
<p>选择主摄像机并创建一个新的空游戏对象作为子对象。将这个对象命名为 Listener，向这个对象添加一个 Audio Listener，在 Transform 组件中将坐标设置为 x = 0、y = 0 且 z = 10。.在主摄像机上，右键单击 Audio Listener，然后选择 Remove Component。使listener正好在z=0处</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="Scripts"><a href="#Scripts" class="headerlink" title="Scripts"></a>Scripts</h2><ul>
<li><p>RubyControler</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RubyControler</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">int</span> maxHealth = <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">float</span> speed = <span class="number">3.0f</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">float</span> timeInvincible = <span class="number">2.0f</span>;<span class="comment">//无敌时间</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> currentHealth;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">int</span> health &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> currentHealth; &#125; &#125;<span class="comment">//属性</span></span><br><span class="line">  <span class="comment">//属性的用法很像变量，而不是像函数。</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> isInvincible;</span><br><span class="line">  <span class="built_in">float</span> invincibleTimer;</span><br><span class="line"></span><br><span class="line">  Rigidbody2D rigidbody2d;</span><br><span class="line">  Animator animator;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> GameObject projectilePrefab;</span><br><span class="line"></span><br><span class="line">  Vector2 lookDirection = <span class="keyword">new</span> Vector2(<span class="number">1</span>, <span class="number">0</span>);<span class="comment">//存储观察方向</span></span><br><span class="line">  <span class="built_in">float</span> vertical;</span><br><span class="line">  <span class="built_in">float</span> horizontal;</span><br><span class="line"></span><br><span class="line">  AudioSource audioSource;</span><br><span class="line">  <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="comment">//每秒帧率设为10帧</span></span><br><span class="line">      <span class="comment">//QualitySettings.vSyncCount = 0;</span></span><br><span class="line">      <span class="comment">//Application.targetFrameRate = 10;</span></span><br><span class="line">      rigidbody2d = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">      animator = GetComponent&lt;Animator&gt;();</span><br><span class="line"></span><br><span class="line">      currentHealth = maxHealth;</span><br><span class="line">      currentHealth = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">      audioSource = GetComponent&lt;AudioSource&gt;();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">PlaySound</span>(<span class="params">AudioClip clip</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      audioSource.PlayOneShot(clip);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update is called once per frame</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      vertical = Input.GetAxis(<span class="string">&quot;Vertical&quot;</span>);</span><br><span class="line">      horizontal = Input.GetAxis(<span class="string">&quot;Horizontal&quot;</span>);</span><br><span class="line"></span><br><span class="line">      Vector2 move = <span class="keyword">new</span> Vector2(horizontal, vertical);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!Mathf.Approximately(move.x, <span class="number">0.0f</span>) || !Mathf.Approximately(move.y, <span class="number">0.0f</span>))</span><br><span class="line">      &#123;</span><br><span class="line">          lookDirection.Set(move.x, move.y);</span><br><span class="line">          lookDirection.Normalize();</span><br><span class="line">      &#125;</span><br><span class="line">      animator.SetFloat(<span class="string">&quot;Look X&quot;</span>, lookDirection.x);</span><br><span class="line">      animator.SetFloat(<span class="string">&quot;Look Y&quot;</span>, lookDirection.y);</span><br><span class="line">      animator.SetFloat(<span class="string">&quot;Speed&quot;</span>, move.magnitude);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (isInvincible)</span><br><span class="line">      &#123;</span><br><span class="line">          invincibleTimer -= Time.deltaTime;</span><br><span class="line">          <span class="keyword">if</span> (invincibleTimer &lt; <span class="number">0</span>)</span><br><span class="line">              isInvincible = <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.C))</span><br><span class="line">          Launch();</span><br><span class="line"></span><br><span class="line">      <span class="comment">//射线投射</span></span><br><span class="line">      <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.X))</span><br><span class="line">      &#123;</span><br><span class="line">          RaycastHit2D hit = Physics2D.Raycast(rigidbody2d.position + Vector2.up * <span class="number">0.2f</span>, lookDirection, <span class="number">1.5f</span>, LayerMask.GetMask(<span class="string">&quot;NPC&quot;</span>));</span><br><span class="line">          <span class="keyword">if</span> (hit.collider != <span class="literal">null</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              NonPlayerCharacter character = hit.collider.GetComponent&lt;NonPlayerCharacter&gt;();</span><br><span class="line">              <span class="keyword">if</span> (character != <span class="literal">null</span>)</span><br><span class="line">                  character.DisplayDialog();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      Vector2 position = transform.position;</span><br><span class="line">      position.x = position.x + speed * horizontal * Time.deltaTime;</span><br><span class="line">      position.y = position.y + speed * vertical * Time.deltaTime;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//position = position + speed * move * Time.deltaTime;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//transform.position = position;</span></span><br><span class="line"></span><br><span class="line">      rigidbody2d.MovePosition(position);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ChangeHealth</span>(<span class="params"><span class="built_in">int</span> amount</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span>(amount &lt; <span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span> (isInvincible)</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">          isInvincible = <span class="literal">true</span>;</span><br><span class="line">          invincibleTimer = timeInvincible;</span><br><span class="line">      &#125;</span><br><span class="line">      currentHealth = Mathf.Clamp(currentHealth + amount, <span class="number">0</span>, maxHealth);</span><br><span class="line">      <span class="comment">//Debug.Log(currentHealth + &quot;/&quot; + maxHealth);</span></span><br><span class="line">      UIHealthBar.instance.SetValue(currentHealth / (<span class="built_in">float</span>)maxHealth);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Launch</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      GameObject projectileObject = Instantiate(projectilePrefab, rigidbody2d.position + Vector2.up * <span class="number">0.5f</span>, Quaternion.identity);<span class="comment">//创建副本</span></span><br><span class="line"></span><br><span class="line">      Projectile projectile = projectileObject.GetComponent&lt;Projectile&gt;();</span><br><span class="line">      projectile.Launch(lookDirection, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">      animator.SetTrigger(<span class="string">&quot;Launch&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>EnemyController</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EnemyController</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">float</span> speed;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">bool</span> vertical;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">float</span> changeTime = <span class="number">3.0f</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> broken = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Rigidbody2D rigidbody2d;</span><br><span class="line">  Animator animator;</span><br><span class="line">  <span class="built_in">float</span> timer;</span><br><span class="line">  <span class="built_in">int</span> direction = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> ParticleSystem smokeEffect;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> AudioClip collectedClip;</span><br><span class="line">  <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      rigidbody2d = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">      animator = GetComponent&lt;Animator&gt;();</span><br><span class="line">      timer = changeTime;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (!broken)</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      timer -= Time.deltaTime;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(timer &lt; <span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">          direction = -direction;</span><br><span class="line">          timer = changeTime;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Update is called once per frame</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">FixedUpdate</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (!broken)</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      Vector2 position = rigidbody2d.position;</span><br><span class="line">      <span class="keyword">if</span> (vertical)</span><br><span class="line">      &#123;</span><br><span class="line">          position.y += Time.deltaTime * speed*direction;</span><br><span class="line">          animator.SetFloat(<span class="string">&quot;Move X&quot;</span>, <span class="number">0</span>);</span><br><span class="line">          animator.SetFloat(<span class="string">&quot;Move Y&quot;</span>, direction);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">          position.x = position.x + Time.deltaTime * speed*direction;</span><br><span class="line">          animator.SetFloat(<span class="string">&quot;Move X&quot;</span>, direction);</span><br><span class="line">          animator.SetFloat(<span class="string">&quot;Move Y&quot;</span>, <span class="number">0</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      rigidbody2d.MovePosition(position);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">OnCollisionEnter2D</span>(<span class="params">Collision2D collision</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      RubyControler player = collision.gameObject.GetComponent&lt;RubyControler&gt;();</span><br><span class="line">      <span class="comment">//此处的类型是 Collision2D，而不是 Collider2D。Collision2D 没有 GetComponent 函数，但是它包含大量有关碰撞的数据，例如与敌人碰撞的游戏对象。因此，在这个游戏对象上调用 GetComponent。</span></span><br><span class="line">      <span class="keyword">if</span> (player != <span class="literal">null</span>)</span><br><span class="line">          player.ChangeHealth(<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">      player.PlaySound(collectedClip);</span><br><span class="line">   </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fix</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      broken = <span class="literal">false</span>;</span><br><span class="line">      rigidbody2d.simulated = <span class="literal">false</span>;</span><br><span class="line">      animator.SetTrigger(<span class="string">&quot;Fixed&quot;</span>);</span><br><span class="line">      smokeEffect.Stop();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HealthCollectible</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HealthCollectible</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> AudioClip collectedClip;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerEnter2D</span>(<span class="params">Collider2D other</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      RubyControler controller = other.GetComponent&lt;RubyControler&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span>(controller != <span class="literal">null</span>)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span> (controller.health &lt; controller.maxHealth)</span><br><span class="line">          &#123;</span><br><span class="line">              controller.ChangeHealth(<span class="number">1</span>);</span><br><span class="line">              Destroy(gameObject);</span><br><span class="line"></span><br><span class="line">              controller.PlaySound(collectedClip);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>NonPlayerCharacter</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NonPlayerCharacter</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">float</span> displayTime = <span class="number">4.0f</span>;</span><br><span class="line">  <span class="keyword">public</span> GameObject dialogBox;</span><br><span class="line">  <span class="built_in">float</span> timerDisplay;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      dialogBox.SetActive(<span class="literal">false</span>);</span><br><span class="line">      timerDisplay = <span class="number">-0.1f</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Update is called once per frame</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span>(timerDisplay &gt;= <span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">          timerDisplay -= Time.deltaTime;</span><br><span class="line">          <span class="keyword">if</span>(timerDisplay &lt; <span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              dialogBox.SetActive(<span class="literal">false</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DisplayDialog</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      timerDisplay = displayTime;</span><br><span class="line">      dialogBox.SetActive(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>UIHealthBar</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UIHealthBar</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> UIHealthBar instance &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;<span class="comment">//set为私有属性 get均会调用</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Image mask;</span><br><span class="line">  <span class="built_in">float</span> originalSize;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      instance = <span class="keyword">this</span>;<span class="comment">//单例对象 只有一个生命值条</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      originalSize = mask.rectTransform.rect.width;<span class="comment">//获取屏幕上的大小</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetValue</span>(<span class="params"><span class="built_in">float</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      mask.rectTransform.SetSizeWithCurrentAnchors(RectTransform.Axis.Horizontal, originalSize * <span class="keyword">value</span>);<span class="comment">//从代码中设置大小和瞄点</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Projectile</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Projectile</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  Rigidbody2D rigidbody2d;</span><br><span class="line">  <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">Awake</span>()<span class="comment">//实例化时不调用start</span></span></span><br><span class="line">  &#123;</span><br><span class="line">      rigidbody2d = GetComponent&lt;Rigidbody2D&gt;();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (transform.position.magnitude &gt; <span class="number">1000.0f</span>)</span><br><span class="line">          Destroy(gameObject);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Launch</span>(<span class="params">Vector2 direction, <span class="built_in">float</span> force</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      rigidbody2d.AddForce(direction * force);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnCollisionEnter2D</span>(<span class="params">Collision2D collision</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="comment">//Debug.Log(&quot;Projectile Collision with &quot; + collision.gameObject);</span></span><br><span class="line">      EnemyController e = collision.collider.GetComponent&lt;EnemyController&gt;();</span><br><span class="line">      <span class="keyword">if</span> (e != <span class="literal">null</span>)</span><br><span class="line">          e.Fix();</span><br><span class="line">      Destroy(gameObject);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Damageable</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Damageable</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">//public AudioClip collectedClip;</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnTriggerStay2D</span>(<span class="params">Collider2D other</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      RubyControler controller = other.GetComponent&lt;RubyControler&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (controller != <span class="literal">null</span>)</span><br><span class="line">      &#123;</span><br><span class="line">              controller.ChangeHealth(<span class="number">-1</span>);</span><br><span class="line">              <span class="comment">//controller.PlaySound(collectedClip);</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
       
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '3fa7e95b351aa27f85ca',
            clientSecret: '8b72dabd6ae2e97f256942498eb4d306fe96c4e7',
            repo: 'vzerzz.github.io',
            owner: 'vzerzz',
            admin: ['vzerzz'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    
        <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
        src="//cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<input type="hidden" id="MathJax-js"
        value="//cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML">
</input>
    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2023 Vzer
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("/img/list-background.jpg");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
